(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{415:function(e,t,n){Promise.resolve().then(n.bind(n,3324))},3324:function(e,t,n){"use strict";var r=n(7437),i=n(2265);class s{updateBobPosition(){this.bobX=this.originX+this.length*Math.sin(this.angle),this.bobY=this.originY+this.length*Math.cos(this.angle)}updatePhysics(e){this.cut?(this.verticalVelocity+=e,this.originY+=this.verticalVelocity,this.originX+=this.length*Math.sin(this.angularVelocity)):(this.angularAcceleration=-e/this.length*Math.sin(this.angle),this.angularVelocity+=this.angularAcceleration,this.angle+=this.angularVelocity,this.angularVelocity*=.99),this.updateBobPosition()}draw(e){this.cut||(e.strokeStyle="white",e.beginPath(),e.moveTo(this.originX,this.originY),e.lineTo(this.bobX,this.bobY),e.stroke()),e.fillStyle="white",e.beginPath(),e.arc(this.bobX,this.bobY,10,0,2*Math.PI),e.fill()}constructor(e,t,n,r,i=1){this.length=e,this.angle=t,this.angularVelocity=0,this.angularAcceleration=0,this.verticalVelocity=0,this.originX=n,this.originY=r,this.bobX=0,this.bobY=0,this.mass=i,this.cut=!1,this.updateBobPosition()}}t.default=()=>{let e=(0,i.useRef)(null),[t,n]=(0,i.useState)(9.81),o=(0,i.useRef)(t),c=(0,i.useRef)([]),l=[Math.PI/4,Math.PI/6,Math.PI/8,Math.PI/10],a=(0,i.useRef)(null),u=(0,i.useRef)(!1),[h,g]=(0,i.useState)(!1),d=(0,i.useCallback)(()=>{let t=e.current.width/2,n=[,,,,].fill(200);c.current=[];for(let e=0;e<4;e++)c.current.push(new s(n[e],l[e],t,50));console.log("Pendulums initialized")},[l,50]),b=(0,i.useCallback)(()=>{if(e.current){let t=e.current;t.width=window.innerWidth,t.height=window.innerHeight;let n=t.width/2;c.current.forEach((e,t)=>{e.originX=0===t?n:c.current[t-1].bobX,e.originY=0===t?50:c.current[t-1].bobY}),console.log("Canvas resized and pendulums updated")}},[50]),f=(0,i.useCallback)(e=>{"Space"===e.code&&(console.log("Spacebar pressed"),e.preventDefault(),g(e=>{if(e)return console.log("Restarting game"),d(),!1;for(let e=1;e<c.current.length;e++)c.current[e].cut=!0;return console.log("Pendulums cut"),e})),"ArrowUp"===e.code&&(e.preventDefault(),u.current=!0,console.log("ArrowUp pressed"))},[d]),p=(0,i.useCallback)(e=>{"ArrowUp"===e.code&&(e.preventDefault(),u.current=!1,console.log("ArrowUp released"))},[]);return(0,i.useEffect)(()=>(console.log("Effect: Initial setup"),0===c.current.length&&d(),b(),window.addEventListener("resize",b),window.addEventListener("keydown",f),window.addEventListener("keyup",p),()=>{window.removeEventListener("resize",b),window.removeEventListener("keydown",f),window.removeEventListener("keyup",p),a.current&&cancelAnimationFrame(a.current)}),[d,b,f,p]),(0,i.useEffect)(()=>{o.current=t,console.log("Gravity updated:",t)},[t]),(0,i.useEffect)(()=>{console.log("Effect: Animation loop started");let t=()=>{if(e.current&&!h){let n=e.current,r=n.getContext("2d");if(r.clearRect(0,0,n.width,n.height),u.current){let e=100/(c.current.reduce((e,t)=>e+(t.cut?0:t.mass),0)*o.current),t=e*Math.sin(c.current[0].angle),n=e*Math.cos(c.current[0].angle);if(c.current[0].bobY-=n,c.current[0].bobX-=t,c.current[0].length-=e,c.current[0].bobY<=50){console.log("Win event"),g(!0);return}}for(let e=0;e<c.current.length;e++)e>0&&!c.current[e].cut&&(c.current[e].originX=c.current[e-1].bobX,c.current[e].originY=c.current[e-1].bobY),c.current[e].updatePhysics(o.current),c.current[e].draw(r);a.current=requestAnimationFrame(t)}};return h?a.current&&cancelAnimationFrame(a.current):a.current=requestAnimationFrame(t),()=>{a.current&&cancelAnimationFrame(a.current)}},[h]),console.log("Player has won? ",h),(0,r.jsxs)("div",{children:[h?(0,r.jsxs)("div",{style:{color:"white",textAlign:"center",marginTop:"20%"},children:[(0,r.jsx)("h1",{children:"You Win!"}),(0,r.jsx)("p",{children:"The climber has reached the origin."}),(0,r.jsx)("p",{children:"Press Space to play again!"})]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)("span",{style:{color:"white"},children:"Gravity:"}),(0,r.jsx)("input",{type:"range",min:"0",max:"20",step:"0.1",value:t,onChange:e=>{n(parseFloat(e.target.value))},style:{width:"20%"}})]}),(0,r.jsx)("canvas",{ref:e,style:{background:"#000000"}})]})}}},function(e){e.O(0,[971,23,744],function(){return e(e.s=415)}),_N_E=e.O()}]);